<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Book Reservation - Welcome and choose a Book</title>
  <style type="text/css">
    body {
      width: 800px;
      margin: auto;
      font-family: Arial, sans-serif;
    }
    h1 {
      color: #333;
    }
    form {
      margin-top: 20px;
    }
    .book-option {
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    .book-option:hover {
      background-color: #f5f5f5;
    }
    .error {
      color:red;
    }
    a.button {
      background-color: #4CAF50;
      color: white;
      padding: 5px 10px;
      text-decoration: none;
      border-radius: 5px;
    }
  </style>
</head>
<body>
<header>
  <h1>Welcome to our Book Reservation App</h1>
</header>
<main>
  <h2>Books List</h2>
  <a class="button" th:href="@{/books/book-form}">Add New Book</a>
  <ul>
    <li th:each="elem: ${books}">
      <span th:text="${elem.title + ' - ' + elem.genre + ', Rating: ' + elem.averageRating + ', Author: ' + elem.author.name + ' ' + elem.author.surname}"></span>

      <a class="button" th:href="@{'/books/book-form/'+${elem.id}}">Edit</a>

      <form th:action="@{'/books/delete/'+${elem.id}}" method="post" style="display:inline">
        <button type="submit" class="button">Delete</button>
      </form>
    </li>
  </ul>
  <form th:action="@{/bookReservation}" method="POST">
    <h2>Choose a book:</h2>
    <ul>
      <li th:each="elem: ${books}">
        <input class="book-option" th:value="${elem.getTitle()}" name="bookTitle"
               th:text="${'Title: '+elem.getTitle()+', Genre: '+elem.getGenre()+', Rating: '+elem.getAverageRating()+', Author: '+elem.getAuthor().getName()+' '+elem.getAuthor().getSurname()}"
               type="radio">
      </li>
    </ul>

    <h2>Enter your information:</h2>
    <label for="readerName">Your Name:</label>
    <input id="readerName" type="text" name="readerName" required><br/>
    <label for="readerAddress">Your Address:</label>
    <input id="readerAddress" type="text" name="readerAddress" required><br/>

    <h2>Choose number of copies:</h2>
    <label for="numCopies">
    <input id="numCopies" type="number" name="numCopies" min="1" max="10" required><br/>
    </label>
    <br/>
    <input type="submit" value="Reserve Book">
  </form>
  <div>
    <form th:method="POST" th:action="@{/books}">
      <h2>Enter search information:</h2>
      <label for="title">Book Title:</label>
      <input id="title" type="text" name="titles"><br/>
      <label for="rating">Rating:</label>
      <input id="rating" type="number" min="1" max="10" name="ratings"><br/><br/>
      <input type="submit" value="Search for books">
    </form>
    <h3 class="error" th:if="${hasError !=null}" th:text="${error}"></h3>
    <ul th:if="${searchBooks != null}">
      <li th:each="book : ${searchBooks}">
        <p>
          <span th:text="${book.getTitle()}"></span> -
          <span th:text="${book.getGenre()}"></span> -
          <span th:text="${book.getAverageRating()}"></span>
        </p>
      </li>
    </ul>
  </div>
</main>
</body>
</html>